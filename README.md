# YOLOv8 Keypoints 标注工具（增强版）

本项目是一个基于 PyQt5 的窗口化数据集标注工具，支持 YOLOv8 keypoints 格式的人工和自动标注。你可以用鼠标点击/拖拽设置关键点，支持多类别、多目标标注，并可批量导入/导出标签文件。还支持上传训练好的 YOLOv8 `.pt` 模型，对全部图片进行 AI 自动标注。

## 环境与依赖

请确保已安装 Python 3.8 及以上版本。

推荐使用虚拟环境：

```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
venv\Scripts\activate     # Windows
```

安装依赖库：

```bash
pip install pyqt5 numpy opencv-python ultralytics
```

## 启动方法

下载本项目代码后，在命令行中运行：

```bash
python labeling_toolv8_yolov8.py
```

## 使用流程

### 1. 打开图像文件夹

- 点击左侧“打开图像文件夹”按钮，选择你的图片目录。

### 2. 选择标签文件夹（可选）

- 点击“选择标签文件夹”按钮，指定标签保存目录。未指定时，程序会自动在图片目录同级创建 `labels` 文件夹。

### 3. 添加类别与关键点

- 点击“添加新类别”按钮，输入类别名称和关键点名称（用逗号分隔）。
- 可通过“编辑当前类别”修改类别和关键点设置。

### 4. 标注图片

- 在图片上点击添加关键点，拖拽调整关键点位置。
- 支持多目标标注：点击“新建标注”可为同一图片添加多个目标，左侧“标注目标列表”可切换编辑不同目标。
- 点击“保存标注”或“保存标签文件”保存标签。

### 5. 导入/导出标签

- 点击“导入标签文件”可加载已有标签文件，自动识别所有类别和目标。
- 点击“保存标签文件”可将当前标注保存为 YOLOv8 keypoints 格式。

### 6. AI 自动标注（可选）

- 点击“选择 .pt 模型”上传训练好的 YOLOv8 权重文件。
- 点击“AI 标注全部图像”自动对所有图片进行批量标注，标签自动保存到标签目录。
- 自动标注不会影响人工标注功能，可随时切换。

### 7. 标签格式说明

- 标签文件每行为一个目标，格式如下：

  ```
  类别ID x_center y_center width height kp1_x kp1_y kp2_x kp2_y ...（归一化坐标，6位小数）
  ```

- 支持多类别、多目标，每个目标的类别和关键点数自动识别。

## 常见问题

- **自动标注依赖 ultralytics**  
  请确保已安装 `ultralytics`，否则自动标注功能不可用。
- **标签格式兼容**  
  程序自动兼容 YOLOv8 keypoints 标签格式，支持归一化和像素坐标自动转换。
- **多目标切换**  
  左侧“标注目标列表”可切换并编辑每个目标，支持拖拽微调关键点。

## 反馈与贡献

如有疑问或建议，请在 GitHub 仓库的 issue 区留言。欢迎提交 pull request 改进本工具。

---

**作者：ZichenFeng**  
**项目地址：** [GitHub 仓库链接（请补充）]

---
